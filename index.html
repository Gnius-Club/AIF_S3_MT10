<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playbook Sesi√≥n 10 3¬∫ Secundaria</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

    <header>
        <h1><span class="book-icon">üìã</span> <strong>Playbook Sesi√≥n 10 3¬∫ Secundaria</strong></h1>
        <div class="header-widgets">
            <div class="timer-container">
                <span id="timer">‚è±Ô∏è 00:00</span>
                <button id="startStop">Start</button>
                <button id="reset">Reset</button>
            </div>
            <div class="theme-toggle">
                <i class="fas fa-sun"></i>
                <label class="switch">
                    <input type="checkbox" id="theme-toggle-input">
                    <span class="slider round"></span>
                </label>
                <i class="fas fa-moon"></i>
            </div>
        </div>
    </header>

    <div class="main-container">
        <aside class="activity-list">
            <h2>Actividades</h2>
            <ul>
                <li><a href="#activity-0">üìù</a></li>
                <li><a href="#activity-1">1</a></li>
                <li><a href="#activity-2">2</a></li>
                <li><a href="#activity-3">3</a></li>
                <li><a href="#activity-4">4</a></li>
                <li><a href="#activity-5">5</a></li>
            </ul>

            <div class="sidebar-info">
                <p>üí° Cada actividad est√° cuidadosamente dise√±ada para involucrar a los estudiantes.</p>
                <p>‚è±Ô∏è Se proporcionan estimaciones de tiempo para cada actividad para ayudarle a mantener el rumbo.</p>
            </div>
        </aside>

        <main class="content">
            <div class="progress-bar">
                <div class="progress"></div>
            </div>

            <button id="toggle-dialogues">Mostrar todos los di√°logos</button>

            <!-- SECCI√ìN "DE UN VISTAZO" (ANTES ACTIVITY-0) -->
            <div class="activity-card" id="activity-0">
                <h2><span class="book-icon">üìù</span> De un Vistazo: Sesi√≥n Gnius</h2>
                <p class="overview-subtitle">Resumen r√°pido de objetivos, materiales y preparaci√≥n para el facilitador.</p>
                <div class="overview-table-container">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 50%;">Objetivos, T√°cticas y Entregable</th>
                                <th style="width: 50%;">Materiales Espec√≠ficos y Preparaci√≥n Previa</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Objetivos:</strong>
                                    <ul>
                                        <li>Que los estudiantes aprendan a interactuar con un sensor de part√≠culas (Dust/PM2.5) para medir la concentraci√≥n de contaminantes en el aire.</li>
                                        <li>Que sean capaces de enviar estos datos a la nube (SmartIOT.space) y monitorear la salud ambiental.</li>
                                        <li>Que conceptualicen c√≥mo la Inteligencia Artificial utiliza la detecci√≥n de anomal√≠as en datos continuos (picos inesperados) para activar alertas cr√≠ticas y c√≥mo esta capacidad es vital para la salud p√∫blica y la gesti√≥n ambiental predictiva.</li>
                                    </ul>
                                    <strong>Secuencia de Clase:</strong>
                                    <ul>
                                        <li><strong class="tactic-highlight">‚ö°A.I. GYM:</strong> An√°lisis profundo y contextualizaci√≥n de la misi√≥n con Xolo.</li>
                                        <li><strong class="tactic-highlight">‚ö°VIBE CODING:</strong> Dise√±o de la intenci√≥n y generaci√≥n de c√≥digo por IA.</li>
                                        <li><strong class="tactic-highlight">‚ö°AN√ÅLISIS DE C√ìDIGO:</strong> Lectura y comprensi√≥n guiada del c√≥digo generado ("Taming the Genie").</li>
                                        <li><strong class="tactic-highlight">‚ö°IMPLEMENTACI√ìN Y DEBUGGING:</strong> Pruebas de hardware/software y depuraci√≥n colaborativa con Xolo.</li>
                                        <li><strong class="tactic-highlight">‚ö°GNIUS STORM:</strong> Showcase de proyectos, s√≠ntesis de "insights" y reflexi√≥n iterativa.</li>
                                    </ul>
                                    <strong>Entregable Clave:</strong>
                                    <ul>
                                        <li>Un Micro:bit con IOTbit y sensor de part√≠culas (Dust/PM2.5) configurado para leer y enviar datos a SmartIOT.space (o ThingSpeak), con alerta local por umbral, y conceptualizaci√≥n del rol de la IA en la detecci√≥n de anomal√≠as para salud ambiental predictiva.</li>
                                    </ul>
                                </td>
                                <td>
                                    <strong>Materiales Espec√≠ficos:</strong>
                                    <ul>
                                        <li>Proyector o pantalla interactiva.</li>
                                        <li>Conexi√≥n a internet estable y de buena velocidad.</li>
                                        <li>Cuentas de alumno para ThingSpeak (SmartIOT.space).</li>
                                        <li>Chat "Agente Gnius" (Xolo) operativo.</li>
                                        <li>Presentaci√≥n de diapositivas (Diapositivas 1-10).</li>
                                        <li>1 Micro:bit v2 con placa IOTbit y cable USB por equipo de 2 estudiantes.</li>
                                        <li>1x sensor de part√≠culas (Dust/PM2.5, ej. SDS011) por equipo.</li>
                                        <li>1x buzzer por equipo.</li>
                                        <li>SSID y Password de la red Wi-Fi de la clase.</li>
                                        <li>Fuentes de polvo (ej. pa√±uelo, brocha con un poco de polvo) para simular eventos de part√≠culas.</li>
                                    </ul>
                                    <strong>Preparaci√≥n Previa para ESTA Sesi√≥n:</strong>
                                    <ol>
                                        <li><strong>Revisi√≥n del Entorno Digital y F√≠sico (Interna):</strong>
                                            <ul>
                                                <li>Verificar conexi√≥n a internet y funcionamiento de MakeCode (Python editor).</li>
                                                <li>Tener kits Micro:bit v2 con IOTbit, sensores de part√≠culas y buzzers listos.</li>
                                                <li>Asegurarse de que las librer√≠as espec√≠ficas del sensor de part√≠culas (ej. para SDS011, si aplica) est√©n disponibles para cargar en los Micro:bits.</li>
                                                <li>Tener la presentaci√≥n de diapositivas (1-10) lista y en orden.</li>
                                                <li>Probar el chat "Agente Gnius" (Xolo) para asegurar su operatividad.</li>
                                                <li>Tener las credenciales (SSID y Password) de la red Wi-Fi de la clase listas.</li>
                                                <li>Asegurarse de que SmartIOT.space (o ThingSpeak) est√© accesible y funcional, con un campo de datos configurado para part√≠culas.</li>
                                            </ul>
                                        </li>
                                        <li><strong>Familiarizaci√≥n Conceptual y T√©cnica:</strong>
                                            <ul>
                                                <li>Revisar el flujo de esta sesi√≥n, enfoc√°ndose en sensores de part√≠culas (UART/Serial), la detecci√≥n de anomal√≠as con IA, y las implicaciones para salud p√∫blica/gesti√≥n ambiental.</li>
                                                <li>Comprender el c√≥digo Python de ejemplo generado por Xolo para esta misi√≥n, incluyendo la comunicaci√≥n serial.</li>
                                            </ul>
                                        </li>
                                        <li><strong>Preparaci√≥n de la Demostraci√≥n Pr√°ctica:</strong>
                                            <ul>
                                                <li>Tener un Micro:bit con IOTbit y sensor de part√≠culas programado para enviar datos a SmartIOT.space y activar una alarma local al superar un umbral de PM2.5, para una demostraci√≥n inicial si es necesario.</li>
                                            </ul>
                                        </li>
                                    </ol>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- FIN DE LA SECCI√ìN "DE UN VISTAZO" -->

            <div class="activity-card" id="activity-1">
                <h2>‚ö° Actividad 1: Saludo de IA y Contexto ‚è∞ 3 minutos</h2>
                <p>Establecer el tono profesional, activar la personalizaci√≥n de la IA y presentar la misi√≥n del d√≠a.</p>
                <div class="steps">
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 1: Bienvenida e Introducci√≥n a la Misi√≥n</h3>
                            <p>(Proyectar Diapositiva 2) El facilitador da la bienvenida y presenta el enfoque estrat√©gico de la misi√≥n del d√≠a.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Buenos d√≠as, equipo. Han percibido su entorno de muchas maneras. Hoy, un paso crucial hacia IoT de alto impacto social: el monitoreo de la calidad del aire. La contaminaci√≥n por PM2.5 es un riesgo invisible. Su Micro:bit ser√° un 'centinela del aire', detectando concentraci√≥n de part√≠culas. Iniciaremos esta misi√≥n de 'salud ambiental'."</p>
                            </div>
                        </div>
                    </div>
                      <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 2: Activaci√≥n y Personalizaci√≥n de Xolo</h3>
                            <p>El facilitador gu√≠a a los alumnos para que inicien su sesi√≥n de trabajo **individual**, proporcionando a Xolo la informaci√≥n necesaria para la personalizaci√≥n.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Para iniciar, de forma **individual**, abran su interfaz de Xolo y sal√∫denlo. Incluyan su **perfil de aprendizaje** y un **inter√©s personal actual**. Ejemplo: <strong>'Hola Xolo, soy [Tu Nombre], perfil [Cient√≠fico], y pienso en c√≥mo las epidemias respiratorias se conectan con la calidad del aire. Listo.'</strong> Confirmen haber recibido su saludo."</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="activity-card" id="activity-2">
                <h2>‚ö° Actividad 2: "I Can Statement" y Presentaci√≥n del Desaf√≠o ‚è∞ 7 minutos</h2>
                <p>Clarificar las metas de aprendizaje y presentar el desaf√≠o t√©cnico y conceptual del d√≠a.</p>
                <div class="steps">
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 1: Presentaci√≥n del Desaf√≠o Conceptual y T√©cnico</h3>
                            <p>(Proyectar Diapositiva 3) El facilitador introduce el concepto o la herramienta central de la sesi√≥n, contextualizando su relevancia profesional.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Hoy sus Micro:bits detectar√°n lo invisible. Conocer√°n el sensor de part√≠culas (Dust/PM2.5) para medir contaminantes en el aire. Enviar√°n datos a la nube para monitorear salud ambiental. Conceptualizaremos c√≥mo la IA usa la detecci√≥n de anomal√≠as (picos inesperados) para activar alertas cr√≠ticas. Esta capacidad es vital para salud p√∫blica y gesti√≥n ambiental predictiva. Piensen en purificadores de aire inteligentes o aplicaciones de monitoreo ambiental."</p>
                            </div>
                        </div>
                    </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 2: "I Can Statement"</h3>
                            <p>(Proyectar Diapositiva 4) El facilitador presenta el objetivo de aprendizaje de la sesi√≥n en un formato claro y orientado a la competencia.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Al finalizar, podr√°n: <strong>'Interactuar con un sensor de part√≠culas (Dust/PM2.5) para medir contaminaci√≥n, enviar datos a la nube para monitoreo ambiental, y conceptualizar c√≥mo la IA detecta anomal√≠as en datos continuos para alertas cr√≠ticas.'</strong>"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="activity-card" id="activity-3">
                <h2>‚ö° Actividad 3: A.I. GYM (Aprendizaje Individual) ‚è∞ 10 minutos</h2>
                <p>Facilitar un aprendizaje personalizado e individual con Xolo para comprender sensores de part√≠culas, detecci√≥n de anomal√≠as con IA y salud ambiental.</p>
                <div class="steps">
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 1: Instrucci√≥n para el Aprendizaje Estrat√©gico</h3>
                            <p>(Proyectar Diapositiva 5) El facilitador dirige a los alumnos para que inicien su aprendizaje **individual** con Xolo.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Iniciamos el A.I. GYM. De forma **individual**, formulen a Xolo: <strong>'Xolo, expl√≠came c√≥mo funciona un sensor de part√≠culas (Dust/PM2.5) para medir la calidad del aire. Explica por qu√© es importante monitorear este dato en la nube para la salud ambiental, y c√≥mo la IA utiliza la 'detecci√≥n de anomal√≠as' en datos continuos (picos inesperados) para activar alertas cr√≠ticas, incluso sin umbrales fijos.'</strong> Presten atenci√≥n a la detecci√≥n de anomal√≠as."</p>
                            </div>
                        </div>
                    </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 2: An√°lisis y Profundizaci√≥n Conceptual</h3>
                            <p>(Proyectar Diapositiva 6) El facilitador modera una breve discusi√≥n grupal para sintetizar los hallazgos individuales del A.I. GYM y propone preguntas para que los alumnos profundicen con Xolo.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Ahora, analicen las explicaciones de Xolo. Si algo no les queda claro, p√≠danle que profundice. Por ejemplo: <strong>'Xolo, ¬øqu√© es PM2.5 y c√≥mo funciona el sensor para detectarlas?'</strong> o <strong>'¬øPor qu√© el monitoreo en la nube es crucial para evaluar exposici√≥n y identificar fuentes de contaminaci√≥n?'</strong> Pregunten: <strong>'¬øC√≥mo la IA aprende un 'patr√≥n normal' de calidad del aire y detecta desviaciones, incluso sin umbral fijo?'</strong> El objetivo es comprender la identificaci√≥n de lo inesperado para la salud ambiental."</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="activity-card" id="activity-4">
                 <h2>‚ö° Actividad 4: Brain Spark (Trabajo en Equipo) ‚è∞ 22 minutos</h2>
                <p>El facilitador supervisa la ejecuci√≥n del "Flujo de Creaci√≥n Aumentada" en equipos, desde el dise√±o hasta la implementaci√≥n.</p>
                <div class="steps">
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 1: Formaci√≥n de Equipos e Instrucci√≥n</h3>
                            <p>(Proyectar Diapositiva 7) El facilitador instruye a los alumnos a formar sus equipos de trabajo para el resto de la sesi√≥n.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Han explorado la importancia cr√≠tica de monitorear la calidad del aire y c√≥mo la IA detecta lo 'anormal'. Ahora, aplicar√°n esto. Formen sus equipos de proyecto de **2 personas**. Construir√°n un sistema de monitoreo de part√≠culas con sensor Dust/PM2.5 y su Micro:bit (IOTbit)."</p>
                            </div>
                        </div>
                    </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 2: Ideaci√≥n y Definici√≥n de la "Vibe" en Equipo</h3>
                            <p>El equipo dise√±a una intenci√≥n para un "Monitor de Part√≠culas en la Nube con Alerta de Anomal√≠as" y la describe a Xolo.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Su misi√≥n es dise√±ar una 'vibe' para un 'Monitor de Humo para Zonas de Alto Riesgo'. El Micro:bit leer√° PM2.5 con el sensor SDS011. Enviar datos a ThingSpeak (field1) cada 30 segundos para monitorear tendencia. Si PM2.5 > 100 ¬µg/m¬≥ (umbral de 'riesgo'), LED rojo (P8) fijo y buzzer (P0) suena 3 segundos. Mostrar 'AIR OK' o 'ALERTA PM2.5' en pantalla. Describan a Xolo, incluyendo umbral y visualizaci√≥n."</p>
                            </div>
                        </div>
                    </div>
                     <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 3: Generaci√≥n de C√≥digo por IA</h3>
                            <p>(Proyectar Diapositiva 8) Xolo genera el esqueleto de c√≥digo Python para el monitor de humo.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Xolo generar√° el esqueleto de c√≥digo Python. Lo que se muestra a continuaci√≥n es el tipo de c√≥digo que Xolo generar√≠a para esta l√≥gica. Su tarea es analizarlo."</p>
<pre>
# Importaciones necesarias

from network import WLAN, STA_IF

from machine import Pin, UART # UART para sensores seriales como SDS011

import urequests

import time

from iotit import * # Para usar display, LEDs, Buzzer

# --- Configuraci√≥n de la red Wi-Fi ---

SSID = '[SSID_WIFI_CLASE]'

PASSWORD = '[PASSWORD_WIFI_CLASE]'

# --- Configuraci√≥n de la API de SmartIOT.space (ThingSpeak-compatible) ---

API_KEY = 'YOUR_THINGSPEAK_WRITE_API_KEY'

CHANNEL_ID = 'YOUR_THINGSPEAK_CHANNEL_ID'

THINGSPEAK_URL = 'http://api.thingspeak.com/update'

# Definir pines para LED de alerta y Buzzer

led_rojo_alerta = Pin(Pin.P8, Pin.OUT)

buzzer = Pin(Pin.P0, Pin.OUT)

# --- Configuraci√≥n del sensor de part√≠culas (Asumiendo SDS011, serial U(ART)) ---

# Conectar TX del SDS011 a RX del Micro:bit (P15) y RX del SDS011 a TX del Micro:bit (P14)

# Algunos sensores tienen un pin de SET/RESET, que se puede controlar con un pin digital si es necesario

uart = UART(1, baudrate=9600, tx=Pin(14), rx=Pin(15), timeout=1000) # UART 1, TX en P14, RX en P15

# --- Definici√≥n de Umbral de Alerta PM2.5 ---

UMBRAL_PM25_ALERTA = 100 # ¬µg/m¬≥ (seg√∫n est√°ndar de calidad del aire)

# --- Funci√≥n para conectar a Wi-Fi (reutilizada) ---

def connect_wifi():

    wlan = WLAN(STA_IF)

    wlan.active(True)

    if not wlan.isconnected():

        print('Intentando conectar a Wi-Fi...')

        display.scroll("WIFI...")

        wlan.connect(SSID, PASSWORD)

        timeout = 0

        while not wlan.isconnected() and timeout < 30:

            display.show(Image.ASLEEP)

            time.sleep_ms(300)

            display.clear()

            time.sleep_ms(300)

            timeout += 1

    if wlan.isconnected():

        print('Conexi√≥n Wi-Fi exitosa:', wlan.ifconfig())

        display.scroll("CONECTADO")

        return True

    else:

        print('Fallo la conexi√≥n Wi-Fi.')

        display.scroll("WIFI ERROR")

        return False

# --- Funci√≥n para leer datos del sensor SDS011 ---

# Nota: Esta es una simplificaci√≥n. Una librer√≠a completa de SDS011 ser√≠a m√°s robusta.

def read_sds011_data():

    pm25 = -1.0 # Valor por defecto de error

    # Limpiar buffer de UART antes de leer

    while uart.any():

        uart.read()


    # Enviar comando de lectura activa al sensor si es necesario (SDS011 necesita ser 'despertado')

    # uart.write(bytes([0xAA, 0xB4, 0x06, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x06, 0xAB])) # Comando de lectura activa


    data = uart.read(10) # Leer 10 bytes del sensor (formato de datos PM2.5 y PM10)

    if data and len(data) == 10 and data[0] == 0xAA and data[1] == 0xC0:

        # Checksum verification (simplified for example)

        # low_byte = data[2]

        # high_byte = data[3]

        # pm25_val = ((high_byte * 256) + low_byte) / 10.0 # Convertir a ¬µg/m¬≥


        # Simplified parsing for example (assuming data[2] and data[3] are PM2.5)

        pm25 = (data[3] * 256 + data[2]) / 10.0 # PM2.5 = (high_byte * 256 + low_byte) / 10.0

        print(f"PM2.5 crudo: {pm25} ¬µg/m¬≥")

        return pm25

    else:

        print("Error al leer sensor SDS011 o datos incompletos:", data)

        return -1.0 # Indicar error

# --- Funci√≥n para enviar un dato a ThingSpeak (reutilizada) ---

def send_data_to_thingspeak(value, field_num=1):

    try:

        url_with_params = THINGSPEAK_URL + '?api_key=' + API_KEY + '&field' + str(field_num) + '=' + str(value)


        print(f"Enviando dato (field{field_num}): {value}")

        display.scroll("Evento...")

        response = urequests.get(url_with_params)


        if response.status_code == 200:

            print("Dato enviado exitosamente.")

            display.show(Image.CHECK)

            time.sleep_ms(300)

            display.clear()

            return True

        else:

            print(f"Error evento. C√≥digo: {response.status_code} Mensaje: {response.text}")

            display.show(Image.X)

            time.sleep(1)

            display.clear()

            return False

    except Exception as e:

        print(f"Excepci√≥n al enviar evento: {e}")

        display.show(Image.SAD)

        time.sleep(1)

        display.clear()

        return False

# --- Bucle principal del programa ---

if connect_wifi():

    display.scroll("Aire ON!")

    time.sleep(1)


    while True:

        display.scroll("Mid. PM2.5...")


        pm25_lectura = read_sds011_data()


        if pm25_lectura != -1.0: # Si la lectura fue exitosa

            print(f"PM2.5: {pm25_lectura} ¬µg/m¬≥")


            # --- L√≥gica de Alerta de Umbral PM2.5 ---

            if pm25_lectura > UMBRAL_PM25_ALERTA: # Si supera el umbral de alerta

                led_rojo_alerta.write_digital(1) # Encender LED rojo de alerta

                buzzer.write_digital(1) # Activar buzzer

                display.show(Image.ANGRY) # Icono de alerta

                print("¬°ALERTA PM2.5 ALTA!")

                time.sleep(3) # Buzzer suena por 3 segundos

                buzzer.write_digital(0) # Apagar buzzer


            else:

                led_rojo_alerta.write_digital(0) # Apagar LED rojo

                buzzer.write_digital(0) # Apagar buzzer

                display.show(Image.HAPPY) # Icono de OK

                print("Calidad del aire OK.")


            # Enviar el dato a ThingSpeak (asumimos field1 para PM2.5)

            send_data_to_thingspeak(pm25_lectura, 1)

        else:

            print("No se pudo leer el sensor PM2.5. Reintentando...")

            display.show(Image.MEH) # Icono de duda


        time.sleep(30) # Esperar 30 segundos antes de la siguiente lectura y env√≠o

else:

    print("El sistema se detuvo debido a un error de conexi√≥n Wi-Fi. Reinicie para intentar de nuevo.")

    display.scroll("ERROR Fatal")
</pre>
<p><em><!-- NOTA PARA EL FACILITADOR: Este es el c√≥digo que Xolo generar√° para el equipo. No debe ser le√≠do directamente a la clase, sino usado como referencia para la siguiente fase de an√°lisis. --></em></p>
                            </div>
                        </div>
                    </div>
                     <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 4: An√°lisis de C√≥digo Guiado ("Taming the Genie Lvl 2")</h3>
                            <p>(Proyectar Diapositiva 9) El equipo analiza el c√≥digo generado por Xolo, profundizando en su estructura y l√≥gica.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Analicen el c√≥digo. Preg√∫ntenle a Xolo: <strong>'¬øC√≥mo se lee este sensor de part√≠culas (UART/Serial) comparado con anal√≥gicos o I2C? ¬øPor qu√© es m√°s complejo?'</strong> Tambi√©n: <strong>'¬øC√≥mo la IA detecta anomal√≠as (picos inesperados) sin umbrales fijos para alertas cr√≠ticas?'</strong> Y: <strong>'¬øPor qu√© la capacidad de la IA para detectar anomal√≠as es superior a un umbral fijo?'</strong>"</p>
                            </div>
                        </div>
                    </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 5: Implementaci√≥n y Debugging Colaborativo</h3>
                            <p>(Proyectar Diapositiva 10) El equipo implementa el c√≥digo en el Micro:bit y depura posibles errores con la asistencia de Xolo.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Ensamblen su 'Monitor de Humo'. Conecten sensor de part√≠culas (SDS011) a pines seriales (TX a P15/RX, RX a P14/TX). Conecten LED rojo a P8 y buzzer a P0. Copien el c√≥digo y ajusten `UMBRAL_PM25_ALERTA`. Aseg√∫rense de alimentaci√≥n y 'calentamiento'. Carguen y prueben: expongan sensor a polvo. Observen reacci√≥n local y datos en ThingSpeak. Si el sistema no reacciona o datos err√≥neos, depuren con Xolo. Si la consola muestra 'Error al leer sensor SDS011', pregunten a Xolo: <strong>'¬øPor qu√© hay un error en la lectura serial?'</strong>"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="activity-card" id="activity-5">
                <h2>‚ö° Actividad 5: Gnius STORM (Reflexi√≥n en Equipo) ‚è∞ 5 minutos</h2>
                <p>El facilitador modera la presentaci√≥n de resultados y una reflexi√≥n final enfocada en el proceso colaborativo.</p>
                <div class="steps">
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 1: "Think" (Individual)</h3>
                            <p>Instrucci√≥n para la reflexi√≥n individual sobre el proceso de aprendizaje.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <div class="collapsible-content">
                                <p class="dialogue assistant">"Individualmente, piensen: 'Si cada hogar tuviera monitores de part√≠culas con IA, ¬øc√≥mo cambiar√≠a la gesti√≥n de alergias, aire interior y salud p√∫blica? ¬øQu√© desaf√≠os √©ticos surgir√≠an al tener 'polic√≠as del aire' monitoreando continuamente?'"</p>
                            </div>
                        </div>
                    </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 2: "Pair" (Parejas)</h3>
                            <p>Instrucciones para la discusi√≥n en parejas.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <p class="dialogue assistant">"Ahora, discutan sus reflexiones con su compa√±ero. Compartan visiones sobre una 'sociedad monitoreada por part√≠culas'. ¬øPiensan en escenarios donde la IA y los datos de PM2.5 podr√≠an usarse de forma no deseada?"</p>
                            </div>
                        </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 3: "Share" (Grupo)</h3>
                            <p>El facilitador invita a algunos equipos a compartir sus conclusiones con la clase.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <p class="dialogue assistant">"Algunos equipos, compartan sus conclusiones. ¬øQu√© implicaciones √©ticas y sociales tiene el monitoreo ubicuo de la calidad del aire?"</p>
                            <p class="dialogue user"><strong>Equipo 1:</strong> "Tendr√≠amos purificadores de aire autom√°ticos. Desaf√≠o √©tico: la IA podr√≠a 'saber' cu√°ndo alguien fuma en casa o hay m√°s gente, us√°ndose para multas o seguros."</p>
                            <p class="dialogue user"><strong>Equipo 2:</strong> "Las ciudades tendr√≠an mapas de contaminaci√≥n en tiempo real. Riesgo: datos de aire interior podr√≠an espiar h√°bitos de vida, invadiendo la privacidad del hogar."</p>
                            <p class="dialogue user"><strong>Equipo 3:</strong> "Menos asma si las alertas fueran autom√°ticas. Desaf√≠o √©tico: la 'discriminaci√≥n algor√≠tmica' si la IA dice que un barrio tiene mal aire, afectando el valor de propiedades y creando desigualdad."</p>
                            </div>
                        </div>
                    <div class="step-card">
                        <div class="step-content">
                            <h3>Paso 4: S√≠ntesis Final</h3>
                            <p>El facilitador cierra la sesi√≥n con una reflexi√≥n consolidada sobre el aprendizaje del d√≠a.</p>
                        </div>
                        <div class="collapsible">
                            <button type="button" class="collapsible-button">Di√°logo Sugerido</button>
                            <p class="dialogue assistant">"Felicidades, equipo. Construyeron un 'centinela del aire', detectando contaminantes invisibles vitales para la salud. Experimentaron la complejidad de sensores seriales y conceptualizaron c√≥mo la IA usa detecci√≥n de anomal√≠as para alertas cr√≠ticas, sin umbrales fijos. Esto es el coraz√≥n de la salud ambiental predictiva. Han expandido su **monitoreo ambiental a la calidad del aire**, aplicando **detecci√≥n de anomal√≠as** para alertas m√°s inteligentes y proactivas. La pr√≥xima sesi√≥n explorar√° la identificaci√≥n √∫nica y la log√≠stica con sensores RFID."</p>
                            </div>
                        </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
